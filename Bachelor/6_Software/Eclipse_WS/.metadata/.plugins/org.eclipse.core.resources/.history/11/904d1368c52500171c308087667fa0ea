/**
 * @file	C3DOffsetCorrection.h
 * @author	Michael Meindl
 * @date	20.04.2017
 * @brief	Action-Object to correct the state vectors offsets.
 */
#ifndef C3DOFFSETCORRECTION_H
#define C3DOFFSETCORRECTION_H
#include "TMatrix.h"

class C3DOffsetCorrection
{
public:
	using InputType		= TRVector<9U>;
	using OutputType	= TRVector<9U>;
public:
	const OutputType& calcOutput(const InputType& input);
	const OutputType& getValue() const;
public:
	C3DOffsetCorrection();
	C3DOffsetCorrection(const C3DOffsetCorrection&) = delete;
	C3DOffsetCorrection& operator=(const C3DOffsetCorrection&) = delete;
	~C3DOffsetCorrection() = default;
private:
	OutputType 	 mOuput;
	TRVector<9U> mX_Offset;

	static constexpr Float32 sX1Offset = -0.785398163397448F - 0.029F;
	static constexpr Float32 sX2Offset = 0.001364F;
	static constexpr Float32 sX3Offset = 0.702F;

	static constexpr Float32 sPi		   = 3.141592653589793F;
	static constexpr Float32 sG_0         = -5.6638F;
	static constexpr Float32 sG_k1_Offset  = 0.0F;
	static constexpr Float32 sG_k2_Offset  = -0.615479708670387F - 0.02F;
	static constexpr Float32 sG_k3_Offset  = 0.785398163397448F + 0.05F;//  + 0.065F;
	static constexpr Float32 sUK_k1_Offset = 0.0020673F;
	static constexpr Float32 sUK_k2_Offset = 0.0010100F;
	static constexpr Float32 sUK_k3_Offset = 0.0018871F;
	static constexpr Float32 sUR_k1_Offset = 0.0F;
	static constexpr Float32 sUR_k2_Offset = 0.0F;
	static constexpr Float32 sUR_k3_Offset = -0.605355F;
};

#endif
