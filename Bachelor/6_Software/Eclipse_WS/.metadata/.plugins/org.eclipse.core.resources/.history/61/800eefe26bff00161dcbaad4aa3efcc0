/*
 * @file	CLQB.cpp
 * @author	Michael Meindl
 * @date	2.3.2017
 * @brief	Method definitions for CLQB.
 */
#include "CLQB.h"
#include <iostream>
#include <ostream>
#include <fstream>
using namespace std;

CLQB::CLQB(const string& fFile,
		   const string& lFile,
		   const string& aFile,
		   const string& bFile,
		   const string& cFile,
		   const string& tFile,
		   const string& tInvFile) : mK{0.0F}, mL{0.0F}, mA_B{0.0F},
				   	   	   	   	   	 mB_B{0.0F}, mC_B{0.0F}, mT_B{0.0F},
									 mT_B_inv{0.0F}, mPhi{0.0F}, mPhi__d{0.0F},
									 mPsi__d{0.0F}, mTorque{0.0F}, mFirstRun(true)
{
	ifstream stream;
	string data;

	stream.open(fFile);
	stream >> data;
	for(int k = 0; k < 3; k++)
	{
		string tmp = data.substr(0, data.find(","));
		mK[k] = std::stof(tmp);
		data = data.substr(data.find(",")+1);
	}
	stream.close();

	stream.open(lFile);
	stream >> data;
	for(int k = 0; k < 3; k++)
	{
		string tmp = data.substr(0, data.find(","));
		mL[k] = std::stof(tmp);
		data = data.substr(data.find(",")+1);
	}
	stream.close();

	stream.open(aFile);
	for(int k = 0; k < 3; k++)
	{
		stream >> data;
		for(int n = 0; n < 3; n++)
		{
			string tmp = data.substr(0, data.find(","));
			mA_B[k][n] = std::stof(tmp);
			data = data.substr(data.find(",")+1);
		}
	}
	stream.close();

	stream.open(bFile);
	stream >> data;
	for(int k = 0; k < 3; k++)
	{
		string tmp = data.substr(0, data.find(","));
		mB_B[k] = std::stof(tmp);
		data = data.substr(data.find(",")+1);
	}
	stream.close();

	stream.open(cFile);
	stream >> data;
	for(int k = 0; k < 3; k++)
	{
		string tmp = data.substr(0, data.find(","));
		mC_B[k] = std::stof(tmp);
		data = data.substr(data.find(",")+1);
	}
	stream.close();

	stream.open(tFile);
	for(int k = 0; k < 3; k++)
	{
		stream >> data;
		for(int n = 0; n < 3; n++)
		{
			string tmp = data.substr(0, data.find(","));
			mT_B[k][n] = std::stof(tmp);
			data = data.substr(data.find(",")+1);
		}
	}
	stream.close();

	stream.open(tInvFile);
	for(int k = 0; k < 3; k++)
	{
		stream >> data;
		for(int n = 0; n < 3; n++)
		{
			string tmp = data.substr(0, data.find(","));
			mT_B_inv[k][n] = std::stof(tmp);
			data = data.substr(data.find(",")+1);
		}
	}
	stream.close();

}
