/**
 * @file	COffsetCorrection.h
 * @author	Michael Meindl
 * @date	17.02.2017
 * @brief	Action Object to correct the State-Vector's Offsets.
 */
#ifndef COFFSETCORRECTION_H
#define COFFSETCORRECTION_H
#include "CStateData.h"
#include "CPT1.h"
#include "TMatrix.h"

class COffsetCorrection
{
public:
	using InputType  = CStateData;
	using OutputType = CStateData;
public:
	void activate();
	void deactive();
	const CStateData& calcOutput(const CStateData& input);
	const CStateData& getValue();
public:
	COffsetCorrection();
	COffsetCorrection(const COffsetCorrection&) = delete;
	COffsetCorrection& operator=(const COffsetCorrection&) = delete;
	~COffsetCorrection() = default;
private:
	bool mActiveFlag;
	CStateData mOutput;

	static constexpr Float32 sG_0         = -5.6638F;
	static constexpr Float32 sG_k1_Offset  = 0.017F;
	static constexpr Float32 sG_k2_Offset  = 0.139F;
	static constexpr Float32 sG_k3_Offset  = 0.449F;
	static constexpr Float32 sUK_k1_Offset = 0.0020673F;
	static constexpr Float32 sUK_k2_Offset = 0.0010100F;
	static constexpr Float32 sUK_k3_Offset = 0.0018871F;
	static constexpr Float32 sUR_k1_Offset = 0.0F;
	static constexpr Float32 sUR_k2_Offset = 0.0F;
	static constexpr Float32 sUR_k3_Offset = -0.605355F;
};

#endif
